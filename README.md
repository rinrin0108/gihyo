MongoDBクエリ解説
=====

「第1回　使ってみようMongoDB」で紹介したように，MongoDBは"RDBライクな検索クエリ"を実行可能です。
今回は，MongoDBで使用するクエリを，慣れ親しんだSQLクエリと比較しながら学んでみましょう。


### RDBとの用語の違い

MongoDBのクエリを解説する前に，まずはRDBとの用語の違いを以下に示します。

RDBでの呼称               |  MongoDBでの呼称
--------------------------|---------
"データベース"            | "データベース"
"テーブル"                | "コレクション"
"行" "レコード"           | "ドキュメント"
"列" "カラム"             | "フィールド"
"インデックス"            | "インデックス"
"プライマリキー"※        |  "プライマリキー"※

※:RDBでは，一意な列（または列の組み合わせ）を明示的にプライマリキーに指定する必要がありますが，
MongoDBでは，一意な"_id"フィールドが自動的に作成されます。

重要なことは，呼称は異なるものの，RDBにおける概念がほぼそのままMongoDBにも適用できるということです。
すなわち，RDBにおいて，データベースが複数のテーブルを持ち，テーブルが複数のレコードを持ち，
レコードがカラムにより区切られているように，MongoDBにおいても，データベースが複数のコレクションを持ち，
コレクションが複数のドキュメントを持ち，ドキュメントがフィールドにより区切られているのです。  
大きな違いは，RDBではテーブル中の全てのレコードが同じカラムを有するのに対し，
MongoDBではドキュメントごとに独自のフィールドを有することができる点です。



### MongoDBにおけるクエリとは

RDBでSQLクエリを使ってデータを取得するように，
MongoDBでは，"BSONドキュメント"と呼ばれるJSONに似たクエリ記述オブジェクトを使ってデータを取得します。 
例えば，データベースのusersコレクションに入っているすべてのドキュメントを取得したいとき，
以下のようなクエリを発行します。

    db.users.find({})

次に，"last_name"フィールドが"Smith"と一致するドキュメントを取得してみます。

    db.users.find({'last_name': 'Smith'})

さらに，"last_name"フィールドが"Smith"と一致するドキュメントの，"ssn"フィールドだけを取得してみましょう。

    db.users.find({last_name: 'Smith'}, {'ssn': 1});

逆に，すべてのドキュメントから"thumbnail"フィールドを除いた結果を取得するには，以下のようにします。

    db.users.find({}, {thumbnail:0});

このように，BSONドキュメントは次のような構文で記述します。

    




